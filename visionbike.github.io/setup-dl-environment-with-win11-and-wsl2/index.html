<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Setup Deep Learning Environment With Windows 11 and WSL2 - Visionbike</title><meta name="Description" content="This is my cool site"><meta property="og:title" content="Setup Deep Learning Environment With Windows 11 and WSL2" />
<meta property="og:description" content="After a long time of saving money, I finally bought a high-end gaming laptop, not just for games but also for working. Somebody may wonder why I don&rsquo;t build a powerful PC instead of a laptop. However, a high-end gaming laptop can be optimal when your job needs frequent movement or your room lacks space for a huge PC.
My laptop is Lenovo 7 16IAX7 with Core i7 12800HX CPU, Geforce RTX 3070 Ti GPU and DDR5 16GB RAM." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://visionbike.github.io/setup-dl-environment-with-win11-and-wsl2/" /><meta property="og:image" content="https://visionbike.github.io/images/avatar-3d.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-17T16:07:45+08:00" />
<meta property="article:modified_time" content="2023-03-10T19:27:28+08:00" /><meta property="og:site_name" content="Visionbike" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://visionbike.github.io/images/avatar-3d.png"/>

<meta name="twitter:title" content="Setup Deep Learning Environment With Windows 11 and WSL2"/>
<meta name="twitter:description" content="After a long time of saving money, I finally bought a high-end gaming laptop, not just for games but also for working. Somebody may wonder why I don&rsquo;t build a powerful PC instead of a laptop. However, a high-end gaming laptop can be optimal when your job needs frequent movement or your room lacks space for a huge PC.
My laptop is Lenovo 7 16IAX7 with Core i7 12800HX CPU, Geforce RTX 3070 Ti GPU and DDR5 16GB RAM."/>
<meta name="application-name" content="visionbike.github.io">
<meta name="apple-mobile-web-app-title" content="visionbike.github.io"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/images/favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://visionbike.github.io/setup-dl-environment-with-win11-and-wsl2/" /><link rel="prev" href="https://visionbike.github.io/build-personal-blog-with-gh-page/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Setup Deep Learning Environment With Windows 11 and WSL2",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/visionbike.github.io\/setup-dl-environment-with-win11-and-wsl2\/"
        },"genre": "posts","keywords": "installation, configuration","wordcount":  1260 ,
        "url": "https:\/\/visionbike.github.io\/setup-dl-environment-with-win11-and-wsl2\/","datePublished": "2023-02-17T16:07:45+08:00","dateModified": "2023-03-10T19:27:28+08:00","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "https:\/\/visionbike.github.io\/images\/avatar-3d.png"},"author": {
                "@type": "Person",
                "name": "Felix Nguyen"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="auto" data-header-mobile="fixed"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Visionbike">Visionbike</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="/cv/"> CV </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Visionbike">Visionbike</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="/cv/" title="">CV</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Setup Deep Learning Environment With Windows 11 and WSL2</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Felix Nguyen</a></span>&nbsp;<span class="post-category">included in <a href="/categories/setup/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Setup</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2023-02-23">2023-02-23</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1260 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;6 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-install-wsl2-on-windows-11">1. Install WSL2 on Windows 11</a></li>
    <li><a href="#2-install-developement-tools">2. Install Developement Tools</a></li>
    <li><a href="#3-install-nvidia-graphics-drivers-on-windows-11">3 Install NVIDIA Graphics Drivers on Windows 11</a></li>
    <li><a href="#3-install-cuda-on-wsl2">3. Install CUDA on WSL2</a></li>
    <li><a href="#4-install-cudnn">4. Install cuDNN</a></li>
    <li><a href="#5-install-mambaforge">5. Install Mambaforge</a></li>
    <li><a href="#6-setup-deep-learning-environement">6. Setup Deep Learning Environement</a>
      <ul>
        <li><a href="#61-pytorch-gpu">6.1. PyTorch-GPU</a></li>
        <li><a href="#62-tensorflow-gpu">6.2. Tensorflow-GPU</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>After a long time of saving money, I finally bought a high-end gaming laptop, not just for games but also for working. Somebody may wonder why I don&rsquo;t build a powerful PC instead of a laptop. However, a high-end gaming laptop can be optimal when your job needs frequent movement or your room lacks space for a huge PC.</p>
<p>My laptop is Lenovo 7 16IAX7 with Core i7 12800HX CPU, Geforce RTX 3070 Ti GPU and DDR5 16GB RAM. It&rsquo;s a beast for games and deep learning (at least for testing my code)!</p>
<p>Now when Windows 11 introduces Windows Subsystem Linux 2 (WSL2) with more support, we don&rsquo;t need to install a different Linux system that you can struggle to install alongside Windows on your laptop.</p>
<p>The GPU deep learning environment in Windows 11 can be consist of following steps.</p>
<h2 id="1-install-wsl2-on-windows-11">1. Install WSL2 on Windows 11</h2>
<p>Let&rsquo;s install WSL2 on Windows 11. First, you open <strong>Windows PowerShell</strong> as <code>Administrator</code> mode and see which available Linux distributions for installation on WSL2 with following command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># list all Linux distribution available</span>
wsl --list --online
</code></pre></td></tr></table>
</div>
</div><p>This time we will install Ubuntu 22.04.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># install Linux distribution Ubuntu</span>
wsl --install -d Ubuntu
</code></pre></td></tr></table>
</div>
</div><p>If you have many WSL distributions, you can set the default WSL distribution by following commands:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># shutdown all wsl distributions</span>
wsl --shutdown

<span class="c1"># define default wsl distribution to use with wsl</span>
wsl -s &lt;DistributionName&gt;
</code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">The WSL distrubution will be installed in system drive in default, if you want to locate your WSL distribution in a non-system drive, please read more in <a href="https://castorfou.github.io/guillaume_blog/blog/wsl2-conda-mamba-cuda.html" target="_blank" rel="noopener noreffer ">here</a>.</div>
        </div>
    </div>
<h2 id="2-install-developement-tools">2. Install Developement Tools</h2>
<p>Before installing the drivers and cuDNN, I suggest you update and install some necessary tools for your WSL distro.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># update the system</span>
sudo apt update -y

<span class="c1"># upgrade the system</span>
sudo apt upgrade -y

<span class="c1"># install some development tools</span>
sudo apt install -y build-essential pkg-config

<span class="c1"># install additional tools</span>
sudo apt install -y curl wget uget tar zip unzip rar unrar

<span class="c1"># install python3</span>
sudo apt install -y python3 python3-dev python3-pip python3-setuptools python3-venv

<span class="c1"># install git</span>
sudo apt install -y git
git config --global user.name <span class="s2">&#34;name&#34;</span>
git config --global user.email <span class="s2">&#34;name@domain.com&#34;</span>
</code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Copy your own Github SSH keys to <code>~/.ssh</code>.</div>
        </div>
    </div>
<h2 id="3-install-nvidia-graphics-drivers-on-windows-11">3 Install NVIDIA Graphics Drivers on Windows 11</h2>
<p>I recommend installing GeForce Experience Drivers. GeForce Experience is a utility that manages the graphics drivers of NVIDIA&rsquo;s GeForce family of products, optimizes them for various PC games, and provides recording capabilities.</p>
<p>From checking for the latest drivers to installing, you can easily do it with the GUI. The download is available at <a href="https://www.nvidia.com/ja-jp/geforce/geforce-experience/" target="_blank" rel="noopener noreffer ">this site</a>.</p>
<p>The graphics driver is installed at the same time that you install GeForce Experience. Reboot the computer before continuing the next step.</p>
<h2 id="3-install-cuda-on-wsl2">3. Install CUDA on WSL2</h2>
<p>Once the graphics driver is installed, install CUDA. Suppose you select items according to the system at hand from <a href="https://developer.nvidia.com/cuda-downloads" target="_blank" rel="noopener noreffer ">CUDA Toolkit download site</a>. In that case, it will suggest commands according to it.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/setup-dl-environment-with-win11-and-wsl2/cuda-download.png"
        data-srcset="/setup-dl-environment-with-win11-and-wsl2/cuda-download.png, /setup-dl-environment-with-win11-and-wsl2/cuda-download.png 1.5x, /setup-dl-environment-with-win11-and-wsl2/cuda-download.png 2x"
        data-sizes="auto"
        alt="/setup-dl-environment-with-win11-and-wsl2/cuda-download.png"
        title="cuda download page" width="1630" height="725" /></p>
<p>We will continue to execute the commands that have appeared.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">wget https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/cuda-wsl-ubuntu.pin
sudo mv cuda-wsl-ubuntu.pin /etc/apt/preferences.d/cuda-repository-pin-600
wget https://developer.download.nvidia.com/compute/cuda/12.1.0/local_installers/cuda-repo-wsl-ubuntu-12-1-local_12.1.0-1_amd64.deb
sudo dpkg -i cuda-repo-wsl-ubuntu-12-1-local_12.1.0-1_amd64.deb
sudo cp /var/cuda-repo-wsl-ubuntu-12-1-local/cuda-*-keyring.gpg /usr/share/keyrings/
sudo apt-get update
sudo apt-get -y install cuda
</code></pre></td></tr></table>
</div>
</div><p>Finally, let&rsquo;s add CUDA&rsquo;s path to the system environment by adding the <code>PATH</code> and <code>LD_LIBRARY_PATH</code> variables to <code>~/.bashrc</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">nano ~/.bashrc

<span class="c1"># at the end of ~/.bashrc file</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda/bin:<span class="nv">$PATH</span>
<span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64:<span class="nv">$LD_LIBRARY_PATH</span>
<span class="c1"># Ctrl + S to save the modification</span>
<span class="c1"># Ctrl + X to exit the editor</span>

<span class="c1"># activate .bashrc file&#39;s change</span>
<span class="nb">source</span> .bashrc
</code></pre></td></tr></table>
</div>
</div><p>If it finishes successfully, CUDA operation is fine.</p>
<h2 id="4-install-cudnn">4. Install cuDNN</h2>
<p>cuDNN is a library for deep learning provided by NVIDIA. Since the calculation of neural networks is accelerated, it is an essential library for those who do deep learning. It can be downloaded from <a href="https://developer.nvidia.com/cudnn" target="_blank" rel="noopener noreffer ">this site</a>. You must participate in the NVIDIA Developer Program to download.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/setup-dl-environment-with-win11-and-wsl2/cudnn-download.png"
        data-srcset="/setup-dl-environment-with-win11-and-wsl2/cudnn-download.png, /setup-dl-environment-with-win11-and-wsl2/cudnn-download.png 1.5x, /setup-dl-environment-with-win11-and-wsl2/cudnn-download.png 2x"
        data-sizes="auto"
        alt="/setup-dl-environment-with-win11-and-wsl2/cudnn-download.png"
        title="cudnn download page" width="1118" height="710" /></p>
<p>When the download is completed, execute the following commands.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">tar -xvf cudnn-linux-x86_64-8.x.x.x_cuda.X.Y-archive.tar.xz
sudo cp cudnn-*-archive/include/cudnn*.h /usr/local/cuda/include
sudo cp -P cudnn-*-archive/lib/libcudnn* /usr/local/cuda/lib64
sudo chmod a+r /usr/local/cuda/include/cudnn*.h /usr/local/cuda/lib64/libcudnn*
</code></pre></td></tr></table>
</div>
</div><p>Next we will perform the installation.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">sudo dpkg -i cudnn-local-repo-<span class="o">[</span>OS<span class="o">]</span>-8.x.x.x_1.0-1_amd64.deb
sudo cp /var/cudnn-local-repo-<span class="o">[</span>OS<span class="o">]</span>-8.x.x.x/cudnn-local-*-keyring.gpg /usr/share/keyrings/
sudo apt-get update
sudo apt-get install <span class="nv">libcudnn8</span><span class="o">=</span>8.x.x.x-1+cudaX.Y
sudo apt-get install libcudnn8-dev<span class="o">=</span>8.x.x.x-1+cudaX.Y
sudo apt-get install libcudnn8-samples<span class="o">=</span>8.x.x.x-1+cudaX.Y
</code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><code>8.x.x.x</code> and <code>X.Y</code> are the version of cuDNN and CUDA, while <code>[OS]</code> is the Operation System&rsquo;s version. to make sure the correct version, you can check in <code>/var/cudnn-local-repo-[OS]-8.x.x.x</code>.</div>
        </div>
    </div>
<p>Finally, check the operation of cuDNN.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ cp -r /usr/src/cudnn_samples_v8/ <span class="nv">$HOME</span>
$ <span class="nb">cd</span>  <span class="nv">$HOME</span>/cudnn_samples_v8/conv_sample
$ make clean <span class="o">&amp;&amp;</span> make
$ bash run_conv_sample
</code></pre></td></tr></table>
</div>
</div><p>A sample program to run convolution operation under multiple settings will work. If <code>Test passed!</code> is displayed, the installation is complete.</p>
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>If the test failed, the reason may be the <code>ld-config</code> connect wrong libcuda. To solve it, you may open <strong>Windows PowerShell</strong> as <code>Administrator</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> C:<span class="se">\W</span>indows<span class="se">\S</span>ystem32<span class="se">\l</span>xss<span class="se">\l</span>ib
del libcuda.so
del libcuda.so.1

<span class="c1"># run wsl -e /bin/bash to open in WSL and create the symlink</span>
wsl -e /bin/bash
ln -s libcuda.so.1.1 libcuda.so.1
ln -s libcuda.so.1.1 libcuda.so
<span class="nb">exit</span>

<span class="c1"># back in PowerShell</span>
wsl --shudown

<span class="c1"># restart WSL</span>
wsl -e /bin/bash
<span class="c1"># check ldconfig</span>
sudo ldconfig
</code></pre></td></tr></table>
</div>
</div><p>Now you can rerun <code>cudnn_samples_v8/conv_sample/run_conv_sample</code> again to obtain <code>Test passed!</code>.</p>
</div>
        </div>
    </div>
<h2 id="5-install-mambaforge">5. Install Mambaforge</h2>
<p>Mamba is a fast, robust, and cross-platform package manager. It can run on Windows, OS X, and Linux (ARM64 and PPC64LE included). In addition, it is fully compatible with conda packages and supports most of conda&rsquo;s commands.</p>
<p>For the Linux platform, you can download <a href="https://github.com/conda-forge/miniforge#mambaforge" target="_blank" rel="noopener noreffer ">Mambaforge</a> and then run the script for installation.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># download the installer</span>
wget <span class="s2">&#34;https://github.com/conda-forge/miniforge/releases/latest/download/Mambaforge-</span><span class="k">$(</span>uname<span class="k">)</span><span class="s2">-</span><span class="k">$(</span>uname -m<span class="k">)</span><span class="s2">.sh&#34;</span>

<span class="c1"># run the downloaded script</span>
bash Mambaforge-<span class="k">$(</span>uname<span class="k">)</span>-<span class="k">$(</span>uname -m<span class="k">)</span>.sh
</code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>If you’d prefer that conda’s base environment not be activated on startup, set the auto_activate_base parameter to false:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">mamba config --set auto_activate_base <span class="nb">false</span>
</code></pre></td></tr></table>
</div>
</div><p>Then close the current shell and open a new shell to activate the effect.</p>
</div>
        </div>
    </div>
<p>Mambaforge comes with the popular conda-forge channel preconfigured. Still, you can modify the configuration to use any channel you like.</p>
<h2 id="6-setup-deep-learning-environement">6. Setup Deep Learning Environement</h2>
<h3 id="61-pytorch-gpu">6.1. PyTorch-GPU</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># create virtual env</span>
mamba create -n torchgpu <span class="nv">python</span><span class="o">=</span>3.10

<span class="c1"># activate created venv</span>
mamba activate torchgpu

<span class="c1"># install necessary packages</span>
pip install --upgrade pip setuptools wheel
mamba install pytorch torchvision torchaudio <span class="nv">cudatoolkit</span><span class="o">=</span>11.7 -c pytorch -c conda-forge
mamba install pytorch-lightning
mamba install scikit-learn scikit-image scipy
mamba install matplotlib seaborn
pip install pandas
pip install --upgrade opencv-python opencv-contrib-python
mamba install tqdm yacs
mamba install jupyter
</code></pre></td></tr></table>
</div>
</div><p>Verification</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ mamba activate torchgpu
<span class="o">(</span>torchgpu<span class="o">)</span> $ python
&gt;&gt;&gt; import torch
&gt;&gt;&gt; torch.cuda.is_available<span class="o">()</span>
&gt;&gt;&gt; exit<span class="o">()</span>
<span class="o">(</span>torchgpu<span class="o">)</span> $ mamba deactivat
</code></pre></td></tr></table>
</div>
</div><h3 id="62-tensorflow-gpu">6.2. Tensorflow-GPU</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">mamba create -n tfgpu <span class="nv">python</span><span class="o">=</span>3.10
mamba activate tfgpu
pip install --upgrade pip setuptools wheel
mamba install -c conda-forge <span class="nv">cudatoolkit</span><span class="o">=</span>11.2 <span class="nv">cudnn</span><span class="o">=</span>8.1.0
<span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$LD_LIBRARY_PATH</span>:<span class="nv">$CONDA_PREFIX</span>/lib/
pip install tensorflow
mamba install scikit-learn scikit-image scipy
mamba install matplotlib seaborn
pip install pandas
pip install --upgrade opencv-python opencv-contrib-python
mamba install tqdm yacs
</code></pre></td></tr></table>
</div>
</div><p>Verification</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ mamba activate tfgpu
<span class="o">(</span>tfgpu<span class="o">)</span> $ python
&gt;&gt;&gt; import tensorflow as tf
&gt;&gt;&gt; from tensorflow.python.client import device_lib
&gt;&gt;&gt; print<span class="o">(</span>tf.config.list_physical_devices<span class="o">(</span><span class="s1">&#39;GPU&#39;</span><span class="o">))</span>
&gt;&gt;&gt; device_lib.list_local_devices<span class="o">()</span>
&gt;&gt;&gt; exit<span class="o">()</span>
<span class="o">(</span>tfgpu<span class="o">)</span> $ mamba deactivate
</code></pre></td></tr></table>
</div>
</div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2023-03-23&nbsp;<a class="git-hash" href="https://github.com/visionbike/Visionbike-Hugo/commit/b21921cafcc1c653e2bc704b7d98e9306b7e942b" target="_blank" title="commit by visionbike(phuc.visionbike@gmail.com) b21921cafcc1c653e2bc704b7d98e9306b7e942b: update recent posts, update the LoveIt theme support">
                                    <i class="fas fa-hashtag fa-fw" aria-hidden="true"></i>b21921c</a></span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/setup-dl-environment-with-win11-and-wsl2/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://visionbike.github.io/setup-dl-environment-with-win11-and-wsl2/" data-title="Setup Deep Learning Environment With Windows 11 and WSL2" data-hashtags="installation,configuration"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://visionbike.github.io/setup-dl-environment-with-win11-and-wsl2/" data-hashtag="installation"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://visionbike.github.io/setup-dl-environment-with-win11-and-wsl2/" data-title="Setup Deep Learning Environment With Windows 11 and WSL2"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://visionbike.github.io/setup-dl-environment-with-win11-and-wsl2/" data-title="Setup Deep Learning Environment With Windows 11 and WSL2"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://visionbike.github.io/setup-dl-environment-with-win11-and-wsl2/" data-title="Setup Deep Learning Environment With Windows 11 and WSL2"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/installation/">installation</a>,&nbsp;<a href="/tags/configuration/">configuration</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/build-personal-blog-with-gh-page/" class="prev" rel="prev" title="Build Personal Blog With Github-Page"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Build Personal Blog With Github-Page</a></div>
</div>
<div id="comments"></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.92.2">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Phuc Thanh-Thien Nguyen</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"search":{"algoliaAppID":"","algoliaIndex":"","algoliaSearchKey":"","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
